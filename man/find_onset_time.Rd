% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/find_onset_time.R
\name{find_onset_time}
\alias{find_onset_time}
\title{Find Onset Time}
\usage{
find_onset_time(
  df,
  cog_time,
  daily_mean,
  onset_roll = 10,
  sustained_minutes = 30
)
}
\arguments{
\item{df}{A data frame containing the activity data with columns 'timestamp', 'HopsPerMinute', and 'rolling_mean_onset'.}

\item{cog_time}{The center of gravity time as a POSIXct object.}

\item{daily_mean}{The daily mean activity level.}

\item{onset_roll}{The rolling mean window for onset calculation, default is 10 minutes.}

\item{sustained_minutes}{The number of minutes the activity needs to stay above the mean to be considered as sustained, default is 30 minutes.}
}
\value{
A POSIXct object representing the onset time if found, otherwise NA.
}
\description{
This function calculates the onset time based on sustained activity above the mean for a given duration.
}
\examples{
# Example usage:
df <- data.frame(
  timestamp = seq.POSIXt(from = as.POSIXct("2023-03-01 00:00:00"),
                         to = as.POSIXct("2023-03-01 23:59:00"), by = "min"),
  HopsPerMinute = rpois(1440, lambda = 2)
)
df <- df \%>\%
  arrange(timestamp) \%>\%
  mutate(rolling_mean_onset = zoo::rollmean(HopsPerMinute, k = 10, fill = NA, align = "right"))

daily_mean <- mean(df$HopsPerMinute, na.rm = TRUE)
cog_time <- as.POSIXct(df$timestamp[floor(nrow(df) / 2)], origin = "1970-01-01")

onset_time <- find_onset_time(df, cog_time, daily_mean, onset_roll = 10, sustained_minutes = 30)
print(onset_time)
}
